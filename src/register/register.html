<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký</title>
    <link href="../css/output.css" rel="stylesheet">
</head>
<body>
    <section class=" min-h-screen flex box-border justify-center items-center" style=" background-size: cover;background-position: center;background-repeat: no-repeat;background-image: url('../img/2082098.jpg')">
        <div class="bg-[#7EAB92] rounded-2xl flex max-w-3xl p-5 items-center">
            <div class="md:w-1/2 px-8">
                <h2 class="font-bold text-3xl text-[#002D74]">Đăng ký</h2>
                <p class="text-sm mt-4 text-[#002D74]">Đăng ký tài khoản ngay! </p>
    
                <form id="loginForm" action="" class="flex flex-col gap-4">
                    <input class="p-2 mt-8 rounded-xl border" 
                    id="firstName"
                    type="text"
                    placeholder="Họ" required>
                    <div class="relative">
                      <input class="p-2 rounded-xl border w-full" 
                      id="lastName"
                      type="text"
                      placeholder="Tên" required>
                  </div>
                  <div class="relative">
                    <input class="p-2 rounded-xl border w-full" 
                    id="number"
                    type="number"
                    placeholder="Số điện thoại" required>
                </div>
                    <div class="relative">
                      <input class="p-2 rounded-xl border w-full" 
                      id="email"
                      type="email"
                      placeholder="Email"
                      required>
                  </div>
                    <div class="relative">
                        <input class="p-2 rounded-xl border w-full" type="password" name="password" id="password" placeholder="Password" required>
                    </div>
                    <div class="relative">
                      <input class="p-2 rounded-xl border w-full" 
                      id="c_password"
                      type="password"
                      placeholder="Confirm Password"
                      required>
                  </div>
                    <button class="bg-[#002D74] text-white py-2 rounded-xl hover:scale-105 duration-300 hover:bg-[#206ab1] font-medium" id="submit" type="submit">Đăng Ký</button>
                </form>
                <div class="mt-6  items-center text-gray-100">
                    <hr class="border-gray-300">
                    <p class="text-center text-sm">HOẶC</p>
                    <hr class="border-gray-300">
                </div>
                <button class="bg-white border py-2 w-full rounded-xl mt-5 flex justify-center items-center text-sm hover:scale-105 duration-300 hover:bg-[#60a8bc4f] font-medium">
                        <svg class="mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="25px">
                            <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path>
                            <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path>
                            <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path>
                            <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path>
                        </svg>
    
                        Đăng ký với Google
                    </button>
                <div class="mt-10 text-sm border-b border-gray-500 py-5 playfair tooltip">Quên mật khẩu?</div>
    
                <div class="mt-4 text-sm flex justify-between items-center container-mr">
                    <p class="mr-3 md:mr-0 ">Nếu bạn đã có tài khoản..</p>
                    <button class="hover:border register text-white bg-[#002D74] hover:border-gray-400 rounded-xl py-2 px-5 hover:scale-110 hover:bg-[#002c7424] font-semibold duration-300" id="login">Đăng Nhập</button>
                </div>
            </div>
            <div class="md:block hidden w-1/2">
              <img class="rounded-2xl max-h-[1600px]" src="https://images.pexels.com/photos/29611334/pexels-photo-29611334/free-photo-of-charming-floral-shopfront-in-ptuj-slovenia.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" alt="login form image">
          </div>
        </div>
    </section>
    
    <div id="popup" class="fixed z-10 inset-0 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen"></span>
            <div
                class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6">
                <div class="sm:flex sm:items-start">
                    <div
                        class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                        <svg class="h-6 w-6 text-green-600" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                        <h3 class="text-lg leading-6 font-medium text-gray-900">
                            Đăng Ký Thành Công !
                        </h3>
                        <div class="mt-2">
                            <p class="text-sm leading-5 text-gray-500">
                                Đăng ký thành công! Bạn có thể đăng nhập ngay bây giờ...
                            </p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                    <span class="flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto">
                        <button id="yes" type="button"
                            class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                            Đồng ý
                        </button>
                    </span>
                    <span class="mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto">
                        <button id="no" type="button"
                            class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5">
                            Từ chối
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <script>
        popup.classList.add('hidden');
        document.getElementById('login').addEventListener('click', () =>{
            window.location.href = '../login/login.html';
        })
        document.getElementById("submit").addEventListener('click',async function (event) {
        event.preventDefault();

        const messageElement = document.getElementById('message');
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('c_password').value;

        if (password !== confirmPassword) {
            messageElement.textContent = 'Mật khẩu không trùng khớp!';
            return;
        }

        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const mobileNumber = document.getElementById('number').value;
        const email = document.getElementById('email').value;
        const apiUrl = 'https://flowerstoreapi-production.up.railway.app/api/auth/register';

        try{ 
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ firstName,lastName,mobileNumber,email, password }),
            });

            if (response.ok) {
                const data = await response.json();
                popup.classList.remove('hidden');
                console.log('User Registered:', data);
            } else {
                const error = await response.json();
                console.log('Error :', error.message);
            }
        } catch (err) {
            console.log('Error :', error.message);
        }
        });
        document.getElementById('no').addEventListener('click', ()=>{
          popup.classList.add('hidden');
        })
        document.getElementById('yes').addEventListener('click', ()=>{
          window.location.href = '../login/login.html';
        })
        
    </script>
</body>
</html>